{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst refs = {\n  buttonStart: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n  picker: document.querySelector('#datetime-picker'),\n};\n\nlet timer = null;\nlet userSelectedDate = null;\n\nlet picker = flatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    flarpickrClosed(selectedDates);\n  },\n});\n\nrefs.buttonStart.addEventListener('click', function () {\n  if (timer) clearInterval(timer);\n  updateTimer();\n  timer = setInterval(updateTimer, 1000);\n  refs.buttonStart.disabled = true;\n  refs.picker.disabled = true;\n});\n\nfunction flarpickrClosed(selectedDates) {\n  let date = new Date(selectedDates[0]);\n  if (date <= Date.now()) {\n    iziFutureDateError();\n    refs.buttonStart.disabled = true;\n    clearInterval(timer);\n    setTimerDisplay(0, 0, 0, 0);\n  } else {\n    userSelectedDate = date;\n    refs.buttonStart.disabled = false;\n  }\n}\n\nfunction updateTimer() {\n  const timeLeft = userSelectedDate - Date.now();\n  if (timeLeft <= 0) {\n    clearInterval(timer);\n    refs.buttonStart.disabled = true;\n    setTimerDisplay(0, 0, 0, 0);\n    refs.picker.disabled = false;\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(timeLeft);\n  setTimerDisplay(days, hours, minutes, seconds);\n}\n\nfunction setTimerDisplay(days, hours, minutes, seconds) {\n  refs.days.textContent = String(days).padStart(2, '0');\n  refs.hours.textContent = String(hours).padStart(2, '0');\n  refs.minutes.textContent = String(minutes).padStart(2, '0');\n  refs.seconds.textContent = String(seconds).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor((ms % hour) / minute);\n  const seconds = Math.floor((ms % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction iziFutureDateError() {\n  iziToast.error({\n    title: 'ðŸ’€ Wrong Date!',\n    message: 'Please choose a date in the future',\n    theme: 'dark',\n    position: 'topRight',\n    timeout: 5000,\n    transitionIn: 'fadeInDown',\n    transitionOut: 'fadeOutUp',\n    progressBarColor: 'red',\n    backgroundColor: 'black',\n    titleColor: 'red',\n    messageColor: 'white',\n    iconColor: 'red',\n    close: true,\n  });\n}\n"],"names":["refs","timer","userSelectedDate","flatpickr","selectedDates","flarpickrClosed","updateTimer","date","iziFutureDateError","setTimerDisplay","timeLeft","days","hours","minutes","seconds","convertMs","ms","iziToast"],"mappings":"+IAKA,MAAMA,EAAO,CACX,YAAa,SAAS,cAAc,cAAc,EAClD,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,OAAQ,SAAS,cAAc,kBAAkB,CACnD,EAEA,IAAIC,EAAQ,KACRC,EAAmB,KAEVC,EAAU,mBAAoB,CACzC,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAgBD,CAAa,CAC9B,CACH,CAAC,EAEDJ,EAAK,YAAY,iBAAiB,QAAS,UAAY,CACjDC,GAAO,cAAcA,CAAK,EAC9BK,EAAa,EACbL,EAAQ,YAAYK,EAAa,GAAI,EACrCN,EAAK,YAAY,SAAW,GAC5BA,EAAK,OAAO,SAAW,EACzB,CAAC,EAED,SAASK,EAAgBD,EAAe,CACtC,IAAIG,EAAO,IAAI,KAAKH,EAAc,CAAC,CAAC,EAChCG,GAAQ,KAAK,OACfC,EAAoB,EACpBR,EAAK,YAAY,SAAW,GAC5B,cAAcC,CAAK,EACnBQ,EAAgB,EAAG,EAAG,EAAG,CAAC,IAE1BP,EAAmBK,EACnBP,EAAK,YAAY,SAAW,GAEhC,CAEA,SAASM,GAAc,CACrB,MAAMI,EAAWR,EAAmB,KAAK,IAAK,EAC9C,GAAIQ,GAAY,EAAG,CACjB,cAAcT,CAAK,EACnBD,EAAK,YAAY,SAAW,GAC5BS,EAAgB,EAAG,EAAG,EAAG,CAAC,EAC1BT,EAAK,OAAO,SAAW,GACvB,MACJ,CAEE,KAAM,CAAE,KAAAW,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EAAUL,CAAQ,EAC5DD,EAAgBE,EAAMC,EAAOC,EAASC,CAAO,CAC/C,CAEA,SAASL,EAAgBE,EAAMC,EAAOC,EAASC,EAAS,CACtDd,EAAK,KAAK,YAAc,OAAOW,CAAI,EAAE,SAAS,EAAG,GAAG,EACpDX,EAAK,MAAM,YAAc,OAAOY,CAAK,EAAE,SAAS,EAAG,GAAG,EACtDZ,EAAK,QAAQ,YAAc,OAAOa,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1Db,EAAK,QAAQ,YAAc,OAAOc,CAAO,EAAE,SAAS,EAAG,GAAG,CAC5D,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAOG,EAAK,KAAQ,GAAM,EACzCF,EAAU,KAAK,MAAOE,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C,CAEA,SAASN,GAAqB,CAC5BS,EAAS,MAAM,CACb,MAAO,iBACP,QAAS,qCACT,MAAO,OACP,SAAU,WACV,QAAS,IACT,aAAc,aACd,cAAe,YACf,iBAAkB,MAClB,gBAAiB,QACjB,WAAY,MACZ,aAAc,QACd,UAAW,MACX,MAAO,EACX,CAAG,CACH"}